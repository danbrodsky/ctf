/********************************************************************
 *   This C program was generated by spl2c, the Shakespeare to C    *
 *          converter by Jon Åslund and Karl Hasselström.           *
 ********************************************************************/

/* libspl definitions and function prototypes */
/***********************************************************************

SPL, the Shakespeare Programming Language

Copyright (C) 2001 Karl Hasselström and Jon Åslund

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or (at
your option) any later version.

This program is distributed in the hope that it will be useful, but
WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307,
USA.

***********************************************************************/
#include <ctype.h>
#include <string.h>
#include <stdlib.h>
#include <stdio.h>

#include "strutils.h"

#define DEBUG

char *cat2(char *str1, char *str2)
{
  int len;
  char *ret;

  /* malloc new string */
  len = strlen(str1) + strlen(str2) + 1;
  ret = (char *) malloc(len*sizeof(char));

  /* copy the strings */
  strcpy(ret, str1);
  strcat(ret, str2);

  /* free old strings */
  free(str1);
  free(str2);

  return ret;
}

char *cat3(char *str1, char *str2, char *str3)
{
  return cat2(cat2(str1, str2), str3);
}

char *cat4(char *str1, char *str2, char *str3, char *str4)
{
  return cat2(cat2(str1, str2), cat2(str3, str4));
}

char *cat5(char *str1, char *str2, char *str3, char *str4,
	   char *str5)
{
  return cat3(cat2(str1, str2), cat2(str3, str4), str5);
}

char *cat6(char *str1, char *str2, char *str3, char *str4,
	   char *str5, char *str6)
{
  return cat3(cat2(str1, str2), cat2(str3, str4), cat2(str5, str6));
}

char *cat7(char *str1, char *str2, char *str3, char *str4,
	   char *str5, char *str6, char *str7)
{
  return cat4(cat2(str1, str2), cat2(str3, str4), cat2(str5, str6), str7);
}

char *cat8(char *str1, char *str2, char *str3, char *str4,
	   char *str5, char *str6, char *str7, char *str8)
{
  return cat4(cat2(str1, str2), cat2(str3, str4),
	      cat2(str5, str6), cat2(str7, str8));
}

char *cat9(char *str1, char *str2, char *str3, char *str4,
	   char *str5, char *str6, char *str7, char *str8,
	   char *str9)
{
  return cat5(cat2(str1, str2), cat2(str3, str4), cat2(str5, str6),
	      cat2(str7, str8), str9);
}

char *int2str(int i)
{
  char *str;

  str = (char *) malloc(25*sizeof(char));
  sprintf(str, "%d", i);

  return str;
}

char *newstr(const char *str)
{
  int len;
  char *ret;

  /* malloc new string */
  len = strlen(str) + 1;
  ret = (char *) malloc(len*sizeof(char));

  /* copy the strings */
  strcpy(ret, str);
  
  return ret;
}

char *space2underscore(char *str)
{
  char *c;
  for(c = str; *c != '\0'; c++) {
    if(isspace((int) *c))
      *c = '_';
  }
  return str;
}

char *singlespace(char *str)
{
  char *read;
  char *write;

  int last_space = 0;
  int this_space = 0;

  /* Walk through the string, deleting multiple spaces. */
  for (read = write = str; *read != '\0'; read++) {

    /* Was the last character a space? */
    last_space = this_space;

    /* Is this character a space? */
    this_space = isspace((int) *read);

    /* Copy the character unless this would make more than one space
       in a row. */
    if (!(last_space && this_space)) {

      /* Copy. */
      *write = *read;

      /* Advance write position. */
      write++;
    }
  }

  /* Write \0 at end of string. */
  *write = '\0';

  /* Return the modified string. */
  return str;
}

char *str2lower(char *str)
{
  char *c;
  for (c = str; *c != '\0'; c++) {
    *c = (char) tolower((int) *c);
  }
  return str;
}

char *str2upper(char *str)
{
  char *c;
  for (c = str; *c != '\0'; c++) {
    *c = (char) toupper((int) *c);
  }
  return str;
}

char *str2varname(char *str)
{
  return str2lower(space2underscore(singlespace(str)));
}

char *strindent(char *str, char *indent)
{
  int newlines, len;
  char *newstr;
  int i, j;

  newlines = 1;
  for (i = 0; str[i] != '\0'; i++) {
    if (str[i] == '\n') {
      newlines++;
    }
  }

  len = strlen(str) + strlen(indent)*newlines + 1;
  newstr = (char *) malloc(len*sizeof(char));
  
  j = 0;
  for (i = 0; str[i] != '\0'; i++) {
    if (i == 0 || str[i - 1] == '\n') {
      strcpy(newstr + j, indent);
      j += strlen(indent);
    }
    newstr[j] = str[i];
    j++;
  }
  newstr[j] = '\0';

  free(str);
  free(indent);
  return newstr;
}

char *strpad(char *str, int length, char fill)
{
  int i;
  
  if (strlen(str) >= length) {
    return str;
  }
  
  str = (char *) realloc(str, (length+1)*sizeof(char));
  
  for (i = strlen(str); i < length; i++) {
    str[i] = fill;
  }
  str[length] = '\0';

  return str;
}


#include <errno.h>
#include <limits.h>
#include <stdio.h>
#include <stdlib.h>

#include "strutils.h"

#define __SHAKESPEARE__

#include <stdlib.h>

#define BUF_SIZE 1024

typedef struct _STACKNODE STACKNODE;
struct _STACKNODE {
  int value;
  STACKNODE *next;
};

typedef struct {
  int value;
  char *name;
  int on_stage;
  STACKNODE *stack;
} CHARACTER;

/* global variables */

CHARACTER **cast;
CHARACTER *first_person;
CHARACTER *second_person;

int truth_flag;
int num_on_stage;
int num_cast;


/* debug functions */
#ifdef DEBUG
static inline void dump_cast_whereabouts(FILE *out)
{
  int i;

  for (i = 0; i < num_cast; i++) {
    fprintf(out, "%20s", cast[i]->name);
    if (cast[i]->on_stage == 1) {
      fprintf(out, " on stage");
    }
    fprintf(out, "\n");
  }
}

static inline void dump_stack(FILE *out, CHARACTER *character)
{
  STACKNODE *node;

  fprintf(out, "%s's stack is now:", character->name);
  for (node = character->stack; node != NULL; node = node->next) {
    fprintf(out, " %d", node->value);
  }
  fprintf(out, "\n");
}
#endif /* DEBUG */

/* local function prototypes */

static inline void runtime_error(int line, char *msg);

/* function definitions */

static inline void activate_character(int line, CHARACTER *character)
{
  int i;

  /* Make sure the character is on stage */
  if (character->on_stage == 0) {
    runtime_error(line, cat2(newstr(character->name), newstr(" is not on stage, and thus cannot speak!\n")));
  }

  /* If there are exactly two people on stage, the other one should be
     second person */
  if (num_on_stage == 2) {
    for (i = 0; i < num_cast; i++) {
      if (cast[i]->on_stage == 1 && cast[i] != character) {
	second_person = cast[i];
      }
    }
  } else {
    second_person = NULL;
  }

  /* Make this character the first person */
  first_person = character;
}

static inline void assign(int line, CHARACTER *character, int value)
{
  /* Make sure the character isn't NULL */
  if (character == NULL) {
    if (num_on_stage == 1) {
      runtime_error(line, newstr("Erroneous use of second person pronoun. There is only one character on stage!"));
    } else {
      runtime_error(line, newstr("Ambiguous use of second person pronoun. There are more than two characters on stage!"));
    }
  }

#ifdef DEBUG
  fprintf(stderr, "\n%s's previous value was %d.\n", character->name, character->value);
#endif

  /* Assign the value */
  character->value = value;

#ifdef DEBUG
  fprintf(stderr, "%s's new value is %d.\n", character->name, character->value);
#endif
}

static inline void char_input(int line, CHARACTER *character)
{
  /* Make sure the character isn't NULL */
  if (character == NULL) {
    if (num_on_stage == 1) {
      runtime_error(line, newstr("Erroneous use of second person pronoun. There is only one character on stage!"));
    } else {
      runtime_error(line, newstr("Ambiguous use of second person pronoun. There are more than two characters on stage!"));
    }
  }

  /* Read a character from stdin */
  character->value = getc(stdin);

  /* If EOF was encountered, record the value -1 */
  if (character->value == EOF) {
    character->value = -1;
  }

#ifdef DEBUG
  fprintf(stderr, "\n%s read the character %c (ascii code %d)\n", character->name, (char) character->value, character->value);
#endif
}

static inline void char_output(int line, CHARACTER *character)
{
  /* Make sure the character isn't NULL */
  if (character == NULL) {
    if (num_on_stage == 1) {
      runtime_error(line, newstr("Erroneous use of second person pronoun. There is only one character on stage!"));
    } else {
      runtime_error(line, newstr("Ambiguous use of second person pronoun. There are more than two characters on stage!"));
    }
  }

  /* Make sure the value is in range */
  if (character->value < 0 || character->value > UCHAR_MAX) {
    runtime_error(line, cat3(newstr("The value "), int2str(character->value),
			     newstr(" does not correspond to a character.")));
  }

  /* Write a character to stdout */
  putc(character->value, stdout);

#ifdef DEBUG
  fprintf(stderr, "\n%s wrote the character %c (ascii code %d)\n", character->name, (char) character->value, character->value);
#endif
}

static inline void enter_scene(int line, CHARACTER *character)
{
  /* Make sure the character isn't already on stage */
  if (character->on_stage == 1) {
    runtime_error(line, cat2(newstr(character->name), newstr(" is already on stage, and thus cannot enter!\n")));
  }
  
  /* Set on_stage flag */
  character->on_stage = 1;

  /* Increase num_on_stage counter */
  num_on_stage++;

#ifdef DEBUG
  fprintf(stderr, "\n%s just entered\n", character->name);
  dump_cast_whereabouts(stderr);
#endif
}

static inline void exit_scene(int line, CHARACTER *character)
{
  /* Make sure the character is on stage */
  if (character->on_stage == 0) {
    runtime_error(line, cat2(newstr(character->name), newstr(" is not on stage, and thus cannot exit!\n")));
  }
  
  /* Set on_stage flag */
  character->on_stage = 0;

  /* Decrease num_on_stage counter */
  num_on_stage--;

#ifdef DEBUG
  fprintf(stderr, "\n%s just exited\n", character->name);
  dump_cast_whereabouts(stderr);
#endif
}

static inline void exit_scene_all(int line)
{
  int i;

  /* Kick everyone off stage! */
  for (i = 0; i < num_cast; i++) {
    cast[i]->on_stage = 0;
  }

  /* Reset num_on_stage counter */
  num_on_stage = 0;

#ifdef DEBUG
  fprintf(stderr, "\nEverybody just exeunted\n");
  dump_cast_whereabouts(stderr);
#endif
}

static inline void global_initialize()
{
  cast = NULL;
  first_person = NULL;
  second_person = NULL;
  truth_flag = 0;
  num_on_stage = 0;
  num_cast = 0;
}

CHARACTER *initialize_character(char *name)
{
  CHARACTER *newchar;

  newchar = (CHARACTER *) malloc(sizeof(CHARACTER));
  newchar->name = newstr(name);
  newchar->on_stage = 0;
  newchar->stack = NULL;
  newchar->value = 0;

  num_cast++;
  cast = (CHARACTER **) realloc(cast, num_cast*sizeof(CHARACTER *));
  cast[num_cast - 1] = newchar;

  return newchar;
}

int int_add(int line, int a, int b)
{
#ifdef DEBUG
  fprintf(stderr, "\nComputing int_add(%d, %d) = %d\n", a, b, a + b);
#endif

  /* Compute the result */
  return a + b;
}

int int_cube(int line, int value)
{
#ifdef DEBUG
  fprintf(stderr, "\nComputing int_cube(%d) = %d\n", value, value*value*value);
#endif
  
  return value*value*value;
}

int int_div(int line, int a, int b)
{
  /* Make sure the denominator is nonzero */
  if (b == 0) {
    runtime_error(line, cat3(newstr("Unable to divide "), int2str(a), newstr(" by zero!")));
  }

#ifdef DEBUG
  fprintf(stderr, "\nComputing int_div(%d, %d) = %d\n", a, b, a/b);
#endif

  /* Compute the result */
  return a/b;
}

int int_factorial(int line, int n)
{
  int i;

#ifdef DEBUG
  int orig = n;
#endif

  /* Make sure the argument is nonnegative */
  if (n < 0) {
    runtime_error(line, cat3(newstr("Unable to compute factorial of "), int2str(n), newstr(", since it is negative!")));
  }
  
  /* Compute the result */
  if (n == 0) {
    n = 1;
  }
  for (i = n - 1; i > 1; i--) {
    n *= i;
  }

#ifdef DEBUG
  fprintf(stderr, "\nComputing int_factorial(%d) = %d\n", orig, n);
#endif

  return n;
}

static inline void int_input(int line, CHARACTER *character)
{
  char buf[BUF_SIZE];
  long lval;

  /* Make sure the character isn't NULL */
  if (character == NULL) {
    if (num_on_stage == 1) {
      runtime_error(line, newstr("Erroneous use of second person pronoun. There is only one character on stage!"));
    } else {
      runtime_error(line, newstr("Ambiguous use of second person pronoun. There are more than two characters on stage!"));
    }
  }
  
  /* Get a line of text */
  fgets(buf, BUF_SIZE, stdin);

  /* Try to parse that into an integer */
  errno = 0;
  lval = strtol(buf, NULL, 10);
  if (lval == 0) {
    switch (errno) {
    case EINVAL:
      runtime_error(line, cat2(newstr(character->name), newstr("'s heart whispered something that was not a valid integer.")));
      break;
    case ERANGE:
      runtime_error(line, cat2(newstr(character->name), newstr("'s heart whispered an integer that was out of range.")));
      break;
    default:
      /* No error, buf really contained the integer zero */
      break;
    }
  }

  /* Make sure it was not out of range */
  if (lval < INT_MIN || lval > INT_MAX) {
    runtime_error(line, cat2(newstr(character->name), newstr("'s heart whispered an integer that was out of range.")));
  }

  /* Store the value */
  character->value = (int) lval;

#ifdef DEBUG
  fprintf(stderr, "\n%s read the value %d\n", character->name, character->value);
#endif
}

int int_mod(int line, int a, int b)
{
  /* Make sure the denominator is nonzero */
  if (b == 0) {
    runtime_error(line, cat3(newstr("Unable to divide "), int2str(a), newstr(" by zero!")));
  }

#ifdef DEBUG
  fprintf(stderr, "\nComputing int_mod(%d, %d) = %d\n", a, b, a%b);
#endif

  /* Compute the result */
  return a%b;
}

int int_mul(int line, int a, int b)
{
#ifdef DEBUG
  fprintf(stderr, "\nComputing int_mul(%d, %d) = %d\n", a, b, a*b);
#endif

  /* Compute the result */
  return a*b;
}

static inline void int_output(int line, CHARACTER *character)
{
  /* Make sure the character isn't NULL */
  if (character == NULL) {
    if (num_on_stage == 1) {
      runtime_error(line, newstr("Erroneous use of second person pronoun. There is only one character on stage!"));
    } else {
      runtime_error(line, newstr("Ambiguous use of second person pronoun. There are more than two characters on stage!"));
    }
  }

  /* Write the number to stdout */
  printf("%d", character->value);

#ifdef DEBUG
  fprintf(stderr, "\n%s wrote the value %d\n", character->name, character->value);
#endif
}

int int_sqrt(int line, int value)
{
  /* Make sure the number is positive */
  if (value < 0) {
    runtime_error(line, cat3(newstr("Unable to compute the square root of "), int2str(value),
			     newstr(", since it is negative.")));
  }

#include <math.h>
#ifdef DEBUG
  fprintf(stderr, "\nComputing int_sqrt(%d) = %d\n", value, (int) sqrt((double) value));
#endif

  /* Compute the square root */
  return (int) sqrt((double) value);
}

int int_square(int line, int value)
{
#ifdef DEBUG
  fprintf(stderr, "\nComputing int_square(%d) = %d\n", value, value*value);
#endif
  
  return value*value;
}

int int_sub(int line, int a, int b)
{
#ifdef DEBUG
  fprintf(stderr, "\nComputing int_sub(%d, %d) = %d\n", a, b, a - b);
#endif

  /* Compute the result */
  return a - b;
}

int int_twice(int line, int value)
{
#ifdef DEBUG
  fprintf(stderr, "\nComputing int_twice(%d) = %d\n", value, 2*value);
#endif
  
  return 2*value;
}

static inline void pop(int line, CHARACTER *character)
{
  STACKNODE *node;

  /* Make sure the character isn't NULL */
  if (character == NULL) {
    if (num_on_stage == 1) {
      runtime_error(line, newstr("Erroneous use of imperative. There is only one character on stage!"));
    } else {
      runtime_error(line, newstr("Ambiguous use of imperative. There are more than two characters on stage!"));
    }
  }

  /* Try to pop a value from the stack */
  node = character->stack;
  if (node == NULL) {
    runtime_error(line, cat2(newstr(character->name), newstr(" is unable to recall anything.")));
  } else {
    character->value = node->value;
    character->stack = node->next;
    free(node);
  }

#ifdef DEBUG
  fprintf(stderr, "\nPopping %s, getting the value %d\n", character->name, character->value);
  dump_stack(stderr, character);
#endif
}

static inline void push(int line, CHARACTER *character, int value)
{
  STACKNODE *node;

  /* Make sure the character isn't NULL */
  if (character == NULL) {
    if (num_on_stage == 1) {
      runtime_error(line, newstr("Erroneous use of imperative. There is only one character on stage!"));
    } else {
      runtime_error(line, newstr("Ambiguous use of imperative. There are more than two characters on stage!"));
    }
  }

  /* Push a value onto the stack */
  node = (STACKNODE *) malloc(sizeof(STACKNODE));
  node->value = value;
  node->next = character->stack;
  character->stack = node;

#ifdef DEBUG
  fprintf(stderr, "\nPushing %d onto %s\n", value, character->name);
  dump_stack(stderr, character);
#endif
}

static inline void runtime_error(int line, char *msg)
{
  fprintf(stderr, "\nRuntime error at line %d: %s\n", line, msg);
  free(msg);
  exit(1);
}

int value_of(int line, CHARACTER *character)
{
  /* Make sure the character isn't NULL */
  if (character == NULL) {
    if (num_on_stage == 1) {
      runtime_error(line, newstr("Erroneous use of second person pronoun. There is only one character on stage!"));
    } else {
      runtime_error(line, newstr("Ambiguous use of second person pronoun. There are more than two characters on stage!"));
    }
  }

  /* Return the value */
  return character->value;
}


int main(void)
{
  /******************************************************************
   * THE LAST WORDS OF 3L L33T                                      *
   ******************************************************************/
  
  CHARACTER *romeo;                       /* an secretive man with a remarkable patience */
  CHARACTER *juliet;                      /* a messenger of the old gods */
  CHARACTER *ophelia;                     /* an all - purpose character */
  CHARACTER *olivia;                      /* an almost useless character */
  CHARACTER *hamlet;                      /* the key bearer */
  
  int comp1, comp2;
  
  global_initialize();
  
  romeo = initialize_character("Romeo");
  juliet = initialize_character("Juliet");
  ophelia = initialize_character("Ophelia");
  olivia = initialize_character("Olivia");
  hamlet = initialize_character("Hamlet");
  
  act_i:                                  /* The beginning */
  
  act_i_scene_i:                          /* The Key */
  
  enter_scene(14, hamlet);
  enter_scene(14, romeo);
  
  activate_character(39, romeo);
  assign(17, second_person, 2*2*2*(-1));
  assign(17, second_person, int_sub(17, (-1), value_of(17, second_person)));
  push(17, second_person, value_of(17, second_person));
  assign(18, second_person, (-1));
  assign(18, second_person, int_sub(18, (-1), value_of(18, second_person)));
  push(18, second_person, value_of(18, second_person));
  assign(18, second_person, 2*2*2*(-1));
  assign(19, second_person, int_sub(19, 1, value_of(19, second_person)));
  push(19, second_person, value_of(19, second_person));
  assign(19, second_person, 2*2*2*(-1));
  assign(20, second_person, int_sub(20, (-1), value_of(20, second_person)));
  push(20, second_person, value_of(20, second_person));
  assign(20, second_person, 2*1);
  push(20, second_person, value_of(20, second_person));
  assign(21, second_person, 2*2*2*1);
  push(21, second_person, value_of(21, second_person));
  assign(21, second_person, 2*1);
  push(21, second_person, value_of(21, second_person));
  assign(21, second_person, 2*2*2*(-1));
  assign(22, second_person, int_sub(22, (-1), value_of(22, second_person)));
  push(22, second_person, value_of(22, second_person));
  assign(22, second_person, 2*2*1);
  assign(22, second_person, int_add(22, value_of(22, second_person), (-1)));
  push(23, second_person, value_of(23, second_person));
  assign(23, second_person, (-1));
  assign(23, second_person, int_sub(23, (-1), value_of(23, second_person)));
  push(23, second_person, value_of(23, second_person));
  assign(24, second_person, 2*2*2*1);
  assign(24, second_person, int_sub(24, value_of(24, second_person), 2*1));
  push(24, second_person, value_of(24, second_person));
  assign(25, second_person, 2*2*2*1);
  push(25, second_person, value_of(25, second_person));
  assign(25, second_person, 2*2*1);
  push(25, second_person, value_of(25, second_person));
  assign(25, second_person, 2*2*2*(-1));
  assign(26, second_person, int_sub(26, (-1), value_of(26, second_person)));
  push(26, second_person, value_of(26, second_person));
  assign(26, second_person, (-1));
  assign(27, second_person, int_sub(27, (-1), value_of(27, second_person)));
  push(27, second_person, value_of(27, second_person));
  assign(27, second_person, 2*2*1);
  assign(28, second_person, int_add(28, value_of(28, second_person), (-1)));
  push(28, second_person, value_of(28, second_person));
  assign(28, second_person, 2*2*1);
  assign(28, second_person, int_add(28, value_of(28, second_person), (-1)));
  push(29, second_person, value_of(29, second_person));
  assign(29, second_person, 2*2*2*(-1));
  assign(29, second_person, int_sub(29, 1, value_of(29, second_person)));
  push(30, second_person, value_of(30, second_person));
  assign(30, second_person, 2*2*1);
  push(30, second_person, value_of(30, second_person));
  assign(30, second_person, 2*1);
  push(30, second_person, value_of(30, second_person));
  assign(30, second_person, 1);
  push(30, second_person, value_of(30, second_person));
  assign(31, second_person, 2*2*2*1);
  push(31, second_person, value_of(31, second_person));
  assign(31, second_person, 1);
  push(31, second_person, value_of(31, second_person));
  assign(31, second_person, 2*2*2*(-1));
  assign(32, second_person, int_sub(32, (-1), value_of(32, second_person)));
  push(32, second_person, value_of(32, second_person));
  assign(32, second_person, 2*1);
  push(32, second_person, value_of(32, second_person));
  assign(32, second_person, 2*2*2*1);
  assign(33, second_person, int_sub(33, value_of(33, second_person), 2*1));
  push(33, second_person, value_of(33, second_person));
  assign(33, second_person, 1);
  push(33, second_person, value_of(33, second_person));
  assign(34, second_person, 2*2*2*1);
  assign(34, second_person, int_sub(34, value_of(34, second_person), 2*1));
  push(34, second_person, value_of(34, second_person));
  assign(35, second_person, 2*2*2*(-1));
  assign(35, second_person, int_sub(35, 1, value_of(35, second_person)));
  push(35, second_person, value_of(35, second_person));
  assign(36, second_person, 2*2*2*1);
  assign(36, second_person, int_sub(36, value_of(36, second_person), 2*1));
  push(36, second_person, value_of(36, second_person));
  assign(37, second_person, 2*2*1);
  assign(37, second_person, int_add(37, value_of(37, second_person), (-1)));
  push(37, second_person, value_of(37, second_person));
  assign(37, second_person, 2*2*2*1);
  assign(38, second_person, int_sub(38, value_of(38, second_person), 2*1));
  push(38, second_person, value_of(38, second_person));
  
  exit_scene_all(39);
  
  act_i_scene_ii:                         /* The secret */
  
  enter_scene(43, hamlet);
  enter_scene(43, romeo);
  
  activate_character(153, hamlet);
  assign(46, second_person, 2*2*2*2*2*2*2*1);
  assign(46, second_person, int_add(46, value_of(46, second_person), 2*2*2*(-1)));
  assign(47, second_person, int_add(47, value_of(47, second_person), 2*(-1)));
  push(48, second_person, value_of(48, second_person));
  assign(49, second_person, int_add(49, value_of(49, second_person), 2*2*2*(-1)));
  push(50, second_person, value_of(50, second_person));
  assign(51, second_person, 2*2*2*2*2*2*1);
  assign(52, second_person, int_sub(52, value_of(52, second_person), 2*2*2*1));
  assign(53, second_person, int_sub(53, value_of(53, second_person), 2*1));
  assign(54, second_person, int_sub(54, value_of(54, second_person), 1));
  push(55, second_person, value_of(55, second_person));
  assign(56, second_person, 2*2*2*2*2*2*2*1);
  assign(57, second_person, int_sub(57, value_of(57, second_person), 2*2*2*2*1));
  assign(58, second_person, int_add(58, value_of(58, second_person), 2*1));
  push(59, second_person, value_of(59, second_person));
  push(60, second_person, value_of(60, second_person));
  assign(61, second_person, int_add(61, value_of(61, second_person), 2*1));
  assign(62, second_person, int_add(62, value_of(62, second_person), 1));
  push(63, second_person, value_of(63, second_person));
  assign(64, second_person, 2*2*2*2*2*2*1);
  assign(65, second_person, int_sub(65, value_of(65, second_person), 2*2*2*1));
  assign(66, second_person, int_sub(66, value_of(66, second_person), 1));
  push(67, second_person, value_of(67, second_person));
  assign(68, second_person, int_add(68, value_of(68, second_person), 2*2*2*2*1));
  assign(69, second_person, int_add(69, value_of(69, second_person), 2*1));
  push(70, second_person, value_of(70, second_person));
  assign(71, second_person, 2*2*2*2*2*2*2*1);
  assign(72, second_person, int_sub(72, value_of(72, second_person), 2*2*2*2*1));
  assign(73, second_person, int_add(73, value_of(73, second_person), 2*1));
  push(74, second_person, value_of(74, second_person));
  assign(75, second_person, int_sub(75, value_of(75, second_person), 2*2*2*2*2*1));
  assign(76, second_person, int_sub(76, value_of(76, second_person), 2*1));
  push(77, second_person, value_of(77, second_person));
  assign(78, second_person, int_add(78, value_of(78, second_person), 2*2*2*2*2*1));
  assign(79, second_person, int_add(79, value_of(79, second_person), 2*1));
  push(80, second_person, value_of(80, second_person));
  assign(81, second_person, int_sub(81, value_of(81, second_person), 2*2*2*2*1));
  assign(82, second_person, int_add(82, value_of(82, second_person), 1));
  push(83, second_person, value_of(83, second_person));
  assign(84, second_person, 2*2*2*2*2*2*2*1);
  assign(84, second_person, int_sub(84, value_of(84, second_person), 2*2*2*1));
  assign(85, second_person, int_sub(85, value_of(85, second_person), 2*1));
  push(86, second_person, value_of(86, second_person));
  assign(87, second_person, int_sub(87, value_of(87, second_person), 2*2*2*1));
  assign(88, second_person, int_add(88, value_of(88, second_person), 2*1));
  push(89, second_person, value_of(89, second_person));
  assign(90, second_person, int_sub(90, value_of(90, second_person), 2*2*2*2*2*1));
  push(91, second_person, value_of(91, second_person));
  assign(92, second_person, int_add(92, value_of(92, second_person), 2*2*2*2*1));
  assign(93, second_person, int_add(93, 2*1, value_of(93, second_person)));
  push(94, second_person, value_of(94, second_person));
  assign(95, second_person, int_sub(95, value_of(95, second_person), 1));
  push(96, second_person, value_of(96, second_person));
  assign(97, second_person, 2*2*2*2*2*2*1);
  assign(98, second_person, int_sub(98, value_of(98, second_person), 2*2*2*1));
  assign(99, second_person, int_add(99, value_of(99, second_person), 1));
  push(100, second_person, value_of(100, second_person));
  assign(101, second_person, int_add(101, value_of(101, second_person), 2*2*2*1));
  assign(102, second_person, int_add(102, value_of(102, second_person), 2*1));
  push(103, second_person, value_of(103, second_person));
  assign(104, second_person, 2*2*2*2*2*2*2*1);
  assign(105, second_person, int_sub(105, value_of(105, second_person), 2*2*2*1));
  assign(106, second_person, int_sub(106, value_of(106, second_person), 2*2*1));
  push(107, second_person, value_of(107, second_person));
  assign(108, second_person, int_sub(108, value_of(108, second_person), 1));
  push(109, second_person, value_of(109, second_person));
  assign(110, second_person, int_sub(110, value_of(110, second_person), 2*2*2*2*1));
  assign(111, second_person, int_add(111, value_of(111, second_person), 2*2*1));
  assign(112, second_person, int_sub(112, value_of(112, second_person), 1));
  push(113, second_person, value_of(113, second_person));
  assign(114, second_person, int_add(114, value_of(114, second_person), 2*1));
  assign(115, second_person, int_add(115, value_of(115, second_person), 1));
  push(116, second_person, value_of(116, second_person));
  assign(117, second_person, int_sub(117, value_of(117, second_person), 1));
  assign(117, second_person, int_div(117, value_of(117, second_person), 2*1));
  push(117, second_person, value_of(117, second_person));
  assign(118, second_person, 2*2*2*2*2*2*2*1);
  assign(119, second_person, int_sub(119, value_of(119, second_person), 2*2*2*1));
  assign(120, second_person, int_sub(120, value_of(120, second_person), 2*2*1));
  push(121, second_person, value_of(121, second_person));
  assign(122, second_person, int_div(122, value_of(122, second_person), 2*1));
  assign(123, second_person, int_sub(123, value_of(123, second_person), 2*2*2*1));
  assign(124, second_person, int_add(124, value_of(124, second_person), 1));
  push(125, second_person, value_of(125, second_person));
  assign(126, second_person, 2*2*2*2*2*2*1);
  assign(127, second_person, int_add(127, value_of(127, second_person), 2*2*2*2*1));
  assign(128, second_person, int_sub(128, value_of(128, second_person), 1));
  push(129, second_person, value_of(129, second_person));
  assign(130, second_person, int_div(130, value_of(130, second_person), 2*1));
  assign(131, second_person, int_add(131, value_of(131, second_person), 2*2*1));
  assign(132, second_person, int_add(132, value_of(132, second_person), 2*1));
  push(133, second_person, value_of(133, second_person));
  assign(134, second_person, int_mul(134, value_of(134, second_person), 2*1));
  assign(135, second_person, int_add(135, value_of(135, second_person), 2*2*2*2*2*1));
  assign(136, second_person, int_add(136, value_of(136, second_person), 2*2*2*1));
  assign(137, second_person, int_add(137, value_of(137, second_person), 2*1));
  assign(138, second_person, int_div(138, value_of(138, second_person), 2*1));
  push(139, second_person, value_of(139, second_person));
  assign(140, second_person, int_div(140, value_of(140, second_person), 2*1));
  assign(141, second_person, int_add(141, value_of(141, second_person), 2*2*2*1));
  assign(142, second_person, int_add(142, value_of(142, second_person), 2*1));
  assign(143, second_person, int_add(143, value_of(143, second_person), 1));
  assign(144, second_person, int_mul(144, value_of(144, second_person), 2*1));
  push(145, second_person, value_of(145, second_person));
  assign(146, second_person, int_add(146, value_of(146, second_person), 2*1));
  push(147, second_person, value_of(147, second_person));
  assign(148, second_person, 2*2*2*2*2*2*1);
  assign(149, second_person, int_add(149, value_of(149, second_person), 1));
  push(150, second_person, value_of(150, second_person));
  
  exit_scene_all(153);
  
  act_i_scene_iii:                        /* The question */
  
  enter_scene(157, juliet);
  enter_scene(157, ophelia);
  
  activate_character(162, ophelia);
  assign(160, second_person, 2*2*2*2*2*2*1);
  assign(160, second_person, int_add(160, value_of(160, second_person), 2*2*2*2*1));
  char_output(160, second_person);
  assign(160, second_person, int_add(160, value_of(160, second_person), 2*2*2*2*2*1));
  assign(160, second_person, int_sub(160, value_of(160, second_person), 2*2*1));
  char_output(160, second_person);
  assign(160, second_person, int_sub(160, value_of(160, second_person), 2*2*2*1));
  assign(160, second_person, int_add(160, value_of(160, second_person), 1));
  char_output(160, second_person);
  push(160, second_person, value_of(160, second_person));
  assign(160, second_person, int_sub(160, value_of(160, second_person), 2*2*1));
  char_output(160, second_person);
  assign(160, second_person, int_add(160, value_of(160, second_person), 2*2*2*2*1));
  assign(160, second_person, int_add(160, value_of(160, second_person), 2*1));
  char_output(160, second_person);
  pop(160, second_person);
  char_output(160, second_person);
  
  activate_character(165, juliet);
  assign(163, second_person, 2*2*2*2*2*1);
  char_output(163, second_person);
  
  activate_character(168, ophelia);
  push(166, second_person, value_of(166, second_person));
  char_output(166, second_person);
  assign(166, second_person, int_add(166, value_of(166, second_person), 2*2*2*1));
  assign(166, second_person, int_add(166, value_of(166, second_person), 1));
  char_output(166, second_person);
  assign(166, second_person, int_add(166, value_of(166, second_person), 2*2*1));
  assign(166, second_person, int_add(166, value_of(166, second_person), 2*1));
  char_output(166, second_person);
  pop(166, second_person);
  char_output(166, second_person);
  push(166, second_person, value_of(166, second_person));
  assign(166, second_person, int_add(166, value_of(166, second_person), 2*2*2*2*1));
  assign(166, second_person, int_sub(166, value_of(166, second_person), 2*1));
  assign(166, second_person, int_sub(166, value_of(166, second_person), 1));
  char_output(166, second_person);
  
  activate_character(171, juliet);
  char_output(169, second_person);
  
  activate_character(174, ophelia);
  assign(172, second_person, int_add(172, value_of(172, second_person), 2*1));
  char_output(172, second_person);
  assign(172, second_person, int_sub(172, value_of(172, second_person), 2*2*2*2*1));
  assign(172, second_person, int_add(172, value_of(172, second_person), 2*2*1));
  char_output(172, second_person);
  pop(172, second_person);
  char_output(172, second_person);
  
  activate_character(177, juliet);
  char_output(175, second_person);
  
  activate_character(180, ophelia);
  assign(178, second_person, int_add(178, value_of(178, second_person), 2*2*2*1));
  assign(178, second_person, int_add(178, value_of(178, second_person), 2*2*1));
  assign(178, second_person, int_sub(178, value_of(178, second_person), 1));
  char_output(178, second_person);
  assign(178, second_person, int_sub(178, value_of(178, second_person), 2*2*2*2*1));
  assign(178, second_person, int_add(178, value_of(178, second_person), 1));
  char_output(178, second_person);
  assign(178, second_person, int_add(178, value_of(178, second_person), 2*2*2*2*1));
  assign(178, second_person, int_add(178, value_of(178, second_person), 2*1));
  char_output(178, second_person);
  char_output(178, second_person);
  assign(178, second_person, int_add(178, value_of(178, second_person), 2*2*1));
  char_output(178, second_person);
  assign(178, second_person, int_sub(178, value_of(178, second_person), 2*2*2*1));
  char_output(178, second_person);
  assign(178, second_person, int_add(178, value_of(178, second_person), 2*1));
  assign(178, second_person, int_add(178, value_of(178, second_person), 1));
  char_output(178, second_person);
  assign(178, second_person, int_sub(178, value_of(178, second_person), 2*2*2*2*1));
  assign(178, second_person, int_add(178, value_of(178, second_person), 2*1));
  char_output(178, second_person);
  assign(178, second_person, int_div(178, value_of(178, second_person), 2*1));
  assign(178, second_person, int_add(178, value_of(178, second_person), 2*2*2*1));
  char_output(178, second_person);
  
  activate_character(183, juliet);
  assign(181, second_person, 2*2*2*1);
  assign(181, second_person, int_add(181, value_of(181, second_person), 2*1));
  char_output(181, second_person);
  assign(181, second_person, 2*2*2*2*2*1);
  
  act_i_scene_iv:                         /* The Cycle */
  
  activate_character(188, ophelia);
  char_input(186, second_person);
  push(186, second_person, value_of(186, second_person));
  assign(186, second_person, 1);
  assign(186, second_person, int_sub(186, 1, value_of(186, second_person)));
  
  activate_character(191, juliet);
  assign(189, second_person, int_sub(189, value_of(189, second_person), 1));
  comp1 = value_of(189, second_person);
  comp2 = value_of(189, first_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(194, ophelia);
  if (truth_flag) {
    goto act_i_scene_iv;
  }
  
  act_ii:                                 /* The First Battle */
  
  act_ii_scene_i:                         /* The Beginning */
  
  exit_scene_all(153);
  enter_scene(197, ophelia);
  enter_scene(197, juliet);
  
  activate_character(202, juliet);
  assign(200, second_person, 2*2*2*2*2*1);
  
  act_ii_scene_ii:                        /* The Cycle Begins */
  
  activate_character(207, ophelia);
  pop(205, second_person);
  
  exit_scene(207, ophelia);
  
  enter_scene(208, romeo);
  
  activate_character(213, juliet);
  assign(211, second_person, 2*2*2*2*2*2*1);
  assign(211, second_person, int_add(211, 2*2*2*2*2*1, value_of(211, second_person)));
  comp1 = value_of(211, first_person);
  comp2 = value_of(211, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(216, romeo);
  if (truth_flag) {
    goto act_ii_scene_iii;
  }
  
  activate_character(219, juliet);
  assign(217, second_person, 2*2*2*2*2*2*1);
  comp1 = value_of(217, first_person);
  comp2 = value_of(217, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(222, romeo);
  if (truth_flag) {
    goto act_ii_scene_iv;
  }
  
  activate_character(225, juliet);
  assign(223, second_person, 2*2*2*2*2*1);
  assign(223, second_person, int_add(223, value_of(223, second_person), 2*2*2*2*1));
  assign(223, second_person, int_sub(223, value_of(223, second_person), 1));
  comp1 = value_of(223, first_person);
  comp2 = value_of(223, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(228, romeo);
  if (truth_flag) {
    goto act_ii_scene_v;
  }
  
  activate_character(231, juliet);
  goto act_ii_scene_viii;
  
  act_ii_scene_iii:                       /* The first army */
  
  activate_character(236, romeo);
  assign(234, second_person, int_add(234, value_of(234, second_person), 2*2*2*2*1));
  assign(234, second_person, int_add(234, value_of(234, second_person), 2*2*1));
  
  activate_character(239, juliet);
  assign(237, second_person, 2*2*2*2*2*2*2*1);
  assign(237, second_person, int_sub(237, value_of(237, second_person), 2*2*1));
  assign(237, second_person, int_sub(237, value_of(237, second_person), 2*1));
  comp1 = value_of(237, first_person);
  comp2 = value_of(237, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(242, romeo);
  if (truth_flag) {
    goto act_ii_scene_vi;
  }
  
  activate_character(245, juliet);
  goto act_ii_scene_viii;
  
  act_ii_scene_iv:                        /* The second army */
  
  activate_character(250, romeo);
  assign(248, second_person, int_add(248, value_of(248, second_person), 2*2*1));
  
  activate_character(253, juliet);
  assign(251, second_person, 2*2*2*2*2*2*1);
  assign(251, second_person, int_add(251, value_of(251, second_person), 2*2*2*2*1));
  assign(251, second_person, int_add(251, value_of(251, second_person), 2*2*2*1));
  assign(251, second_person, int_add(251, value_of(251, second_person), 2*1));
  comp1 = value_of(251, first_person);
  comp2 = value_of(251, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(256, romeo);
  if (truth_flag) {
    goto act_ii_scene_vi;
  }
  
  activate_character(259, juliet);
  goto act_ii_scene_viii;
  
  act_ii_scene_v:                         /* The third army */
  
  activate_character(264, romeo);
  assign(262, second_person, int_add(262, value_of(262, second_person), 2*2*1));
  assign(262, second_person, int_add(262, value_of(262, second_person), 2*1));
  
  activate_character(267, juliet);
  assign(265, second_person, 2*2*2*2*2*1);
  assign(265, second_person, int_add(265, value_of(265, second_person), 2*2*2*2*1));
  assign(265, second_person, int_add(265, value_of(265, second_person), 2*2*2*1));
  assign(265, second_person, int_add(265, value_of(265, second_person), 1));
  comp1 = value_of(265, first_person);
  comp2 = value_of(265, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(270, romeo);
  if (truth_flag) {
    goto act_ii_scene_vii;
  }
  
  activate_character(273, juliet);
  goto act_ii_scene_viii;
  
  act_ii_scene_vi:                        /* The first changes */
  
  activate_character(277, romeo);
  assign(275, second_person, int_sub(275, value_of(275, second_person), 2*2*2*2*2*1));
  assign(275, second_person, int_add(275, value_of(275, second_person), 2*2*1));
  assign(275, second_person, int_add(275, value_of(275, second_person), 2*1));
  goto act_ii_scene_viii;
  
  act_ii_scene_vii:                       /* The second changes */
  
  activate_character(281, romeo);
  assign(279, second_person, int_sub(279, value_of(279, second_person), 2*2*2*1));
  assign(279, second_person, int_sub(279, value_of(279, second_person), 2*1));
  goto act_ii_scene_viii;
  
  act_ii_scene_viii:                      /* The end of the cycle */
  
  exit_scene_all(282);
  
  enter_scene(283, ophelia);
  enter_scene(283, olivia);
  
  activate_character(288, ophelia);
  assign(286, second_person, 1);
  assign(286, second_person, int_sub(286, value_of(286, second_person), 1));
  assign(286, second_person, int_add(286, value_of(286, first_person), value_of(286, second_person)));
  
  exit_scene(288, olivia);
  
  enter_scene(289, juliet);
  
  activate_character(293, juliet);
  assign(291, second_person, 1);
  assign(291, second_person, int_sub(291, value_of(291, second_person), 1));
  assign(291, second_person, int_add(291, value_of(291, first_person), value_of(291, second_person)));
  push(291, second_person, value_of(291, second_person));
  
  exit_scene(293, juliet);
  
  enter_scene(294, olivia);
  
  activate_character(298, olivia);
  assign(296, second_person, 1);
  assign(296, second_person, int_sub(296, value_of(296, second_person), 1));
  assign(296, second_person, int_add(296, value_of(296, first_person), value_of(296, second_person)));
  
  exit_scene(298, olivia);
  
  enter_scene(299, juliet);
  
  activate_character(304, ophelia);
  assign(302, second_person, (-1));
  assign(302, second_person, int_sub(302, (-1), value_of(302, second_person)));
  
  activate_character(307, juliet);
  assign(305, second_person, int_add(305, (-1), value_of(305, second_person)));
  comp1 = value_of(305, second_person);
  comp2 = value_of(305, first_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(310, ophelia);
  if (truth_flag) {
    goto act_ii_scene_ii;
  }
  
  exit_scene_all(310);
  
  act_iii:                                /* The Second Battle */
  
  act_iii_scene_i:                        /* The Beginning */
  
  enter_scene(315, ophelia);
  enter_scene(315, juliet);
  
  activate_character(320, ophelia);
  assign(318, second_person, 2*2*2*2*2*1);
  
  act_iii_scene_ii:                       /* The Cycle Begins */
  
  activate_character(325, juliet);
  pop(323, second_person);
  
  exit_scene(325, juliet);
  
  enter_scene(326, romeo);
  
  activate_character(331, ophelia);
  assign(329, second_person, 2*2*2*2*2*2*1);
  assign(329, second_person, int_add(329, 2*2*2*2*2*1, value_of(329, second_person)));
  comp1 = value_of(329, first_person);
  comp2 = value_of(329, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(334, romeo);
  if (truth_flag) {
    goto act_iii_scene_iii;
  }
  
  activate_character(337, ophelia);
  assign(335, second_person, 2*2*2*2*2*2*1);
  comp1 = value_of(335, first_person);
  comp2 = value_of(335, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(340, romeo);
  if (truth_flag) {
    goto act_iii_scene_iv;
  }
  
  activate_character(343, ophelia);
  assign(341, second_person, 2*2*2*2*2*1);
  assign(341, second_person, int_add(341, value_of(341, second_person), 2*2*2*2*1));
  assign(341, second_person, int_sub(341, value_of(341, second_person), 1));
  comp1 = value_of(341, first_person);
  comp2 = value_of(341, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(346, romeo);
  if (truth_flag) {
    goto act_iii_scene_v;
  }
  
  activate_character(349, ophelia);
  goto act_iii_scene_viii;
  
  act_iii_scene_iii:                      /* The first army */
  
  activate_character(354, romeo);
  assign(352, second_person, int_sub(352, value_of(352, second_person), 2*1));
  assign(352, second_person, int_sub(352, value_of(352, second_person), 1));
  
  activate_character(357, ophelia);
  assign(355, second_person, int_add(355, value_of(355, second_person), 1));
  
  activate_character(360, romeo);
  comp1 = value_of(358, first_person);
  comp2 = value_of(358, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(363, ophelia);
  if (truth_flag) {
    goto act_iii_scene_vi;
  }
  
  activate_character(366, romeo);
  goto act_iii_scene_viii;
  
  act_iii_scene_iv:                       /* The second army */
  
  activate_character(371, romeo);
  assign(369, second_person, int_sub(369, value_of(369, second_person), 2*2*2*2*1));
  
  activate_character(374, ophelia);
  assign(372, second_person, int_add(372, value_of(372, second_person), 1));
  
  activate_character(377, romeo);
  comp1 = value_of(375, first_person);
  comp2 = value_of(375, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(380, ophelia);
  if (truth_flag) {
    goto act_iii_scene_vi;
  }
  
  activate_character(383, romeo);
  goto act_iii_scene_viii;
  
  act_iii_scene_v:                        /* The third army */
  
  activate_character(388, romeo);
  assign(386, second_person, int_sub(386, value_of(386, second_person), 2*2*2*1));
  
  activate_character(391, ophelia);
  assign(389, second_person, int_add(389, value_of(389, second_person), 1));
  
  activate_character(394, romeo);
  comp1 = value_of(392, first_person);
  comp2 = value_of(392, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(397, ophelia);
  if (truth_flag) {
    goto act_iii_scene_vii;
  }
  
  activate_character(400, romeo);
  goto act_iii_scene_viii;
  
  act_iii_scene_vi:                       /* The first change */
  
  activate_character(404, romeo);
  assign(402, second_person, int_add(402, value_of(402, second_person), 2*2*2*2*2*1));
  assign(402, second_person, int_sub(402, value_of(402, second_person), 2*2*1));
  assign(402, second_person, int_sub(402, value_of(402, second_person), 2*1));
  goto act_iii_scene_viii;
  
  act_iii_scene_vii:                      /* The second change */
  
  activate_character(408, romeo);
  assign(406, second_person, int_add(406, value_of(406, second_person), 2*2*2*1));
  assign(406, second_person, int_add(406, value_of(406, second_person), 2*1));
  goto act_iii_scene_viii;
  
  act_iii_scene_viii:                     /* The end of the cycle */
  
  exit_scene_all(409);
  
  enter_scene(410, juliet);
  enter_scene(410, olivia);
  
  activate_character(415, juliet);
  assign(413, second_person, 1);
  assign(413, second_person, int_sub(413, value_of(413, second_person), 1));
  assign(413, second_person, int_add(413, value_of(413, first_person), value_of(413, second_person)));
  
  exit_scene(415, olivia);
  
  enter_scene(416, ophelia);
  
  activate_character(420, ophelia);
  assign(418, second_person, 1);
  assign(418, second_person, int_sub(418, value_of(418, second_person), 1));
  assign(418, second_person, int_add(418, value_of(418, first_person), value_of(418, second_person)));
  push(418, second_person, value_of(418, second_person));
  
  exit_scene(420, ophelia);
  
  enter_scene(421, olivia);
  
  activate_character(425, olivia);
  assign(423, second_person, 1);
  assign(423, second_person, int_sub(423, value_of(423, second_person), 1));
  assign(423, second_person, int_add(423, value_of(423, first_person), value_of(423, second_person)));
  
  exit_scene(425, olivia);
  
  enter_scene(426, ophelia);
  
  activate_character(431, juliet);
  assign(429, second_person, (-1));
  assign(429, second_person, int_sub(429, (-1), value_of(429, second_person)));
  
  activate_character(434, ophelia);
  assign(432, second_person, int_add(432, (-1), value_of(432, second_person)));
  comp1 = value_of(432, second_person);
  comp2 = value_of(432, first_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(437, juliet);
  if (truth_flag) {
    goto act_iii_scene_ii;
  }
  
  exit_scene_all(437);
  
  act_iv:                                 /* The Last Battle */
  
  act_iv_scene_i:                         /* The Beginning */
  
  enter_scene(442, ophelia);
  enter_scene(442, juliet);
  
  activate_character(447, juliet);
  assign(445, second_person, 2*2*2*2*2*1);
  
  act_iv_scene_ii:                        /* The Cycle Begins */
  
  exit_scene(448, ophelia);
  
  enter_scene(449, hamlet);
  
  activate_character(454, hamlet);
  pop(452, second_person);
  
  activate_character(457, juliet);
  assign(455, second_person, 2*2*2*2*2*2*1);
  assign(455, second_person, int_add(455, 2*2*2*2*2*1, value_of(455, second_person)));
  comp1 = value_of(455, first_person);
  comp2 = value_of(455, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(460, hamlet);
  if (truth_flag) {
    goto act_iv_scene_iii;
  }
  
  activate_character(463, juliet);
  assign(461, second_person, 2*2*2*2*2*2*1);
  comp1 = value_of(461, first_person);
  comp2 = value_of(461, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(466, hamlet);
  if (truth_flag) {
    goto act_iv_scene_iv;
  }
  
  activate_character(469, juliet);
  assign(467, second_person, 2*2*2*2*2*1);
  assign(467, second_person, int_add(467, value_of(467, second_person), 2*2*2*2*1));
  assign(467, second_person, int_sub(467, value_of(467, second_person), 1));
  comp1 = value_of(467, first_person);
  comp2 = value_of(467, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(472, hamlet);
  if (truth_flag) {
    goto act_iv_scene_v;
  }
  
  activate_character(476, juliet);
  pop(473, second_person);
  goto act_iv_scene_viii;
  
  act_iv_scene_iii:                       /* The first army */
  
  activate_character(481, juliet);
  pop(479, second_person);
  
  activate_character(484, hamlet);
  assign(482, second_person, int_add(482, value_of(482, second_person), value_of(482, first_person)));
  
  activate_character(487, juliet);
  assign(485, second_person, 2*2*2*2*2*2*2*1);
  assign(485, second_person, int_sub(485, value_of(485, second_person), 2*2*1));
  assign(485, second_person, int_sub(485, value_of(485, second_person), 2*1));
  comp1 = value_of(485, first_person);
  comp2 = value_of(485, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(490, hamlet);
  if (truth_flag) {
    goto act_iv_scene_vi;
  }
  
  activate_character(493, juliet);
  goto act_iv_scene_viii;
  
  act_iv_scene_iv:                        /* The second army */
  
  activate_character(498, juliet);
  pop(496, second_person);
  
  activate_character(501, hamlet);
  assign(499, second_person, int_add(499, value_of(499, second_person), value_of(499, first_person)));
  
  activate_character(504, juliet);
  assign(502, second_person, 2*2*2*2*2*2*1);
  assign(502, second_person, int_add(502, value_of(502, second_person), 2*2*2*2*1));
  assign(502, second_person, int_add(502, value_of(502, second_person), 2*2*2*1));
  assign(502, second_person, int_add(502, value_of(502, second_person), 2*1));
  comp1 = value_of(502, first_person);
  comp2 = value_of(502, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(507, hamlet);
  if (truth_flag) {
    goto act_iv_scene_vi;
  }
  
  activate_character(510, juliet);
  goto act_iv_scene_viii;
  
  act_iv_scene_v:                         /* The third army */
  
  activate_character(514, juliet);
  pop(512, second_person);
  
  activate_character(517, hamlet);
  assign(515, second_person, int_add(515, value_of(515, second_person), value_of(515, first_person)));
  
  activate_character(520, juliet);
  assign(518, second_person, 2*2*2*2*2*1);
  assign(518, second_person, int_add(518, value_of(518, second_person), 2*2*2*2*1));
  assign(518, second_person, int_add(518, value_of(518, second_person), 2*2*2*1));
  assign(518, second_person, int_add(518, value_of(518, second_person), 1));
  comp1 = value_of(518, first_person);
  comp2 = value_of(518, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(523, hamlet);
  if (truth_flag) {
    goto act_iv_scene_vii;
  }
  
  activate_character(526, juliet);
  goto act_iv_scene_viii;
  
  act_iv_scene_vi:                        /* The first change */
  
  activate_character(530, hamlet);
  assign(528, second_person, int_sub(528, value_of(528, second_person), 2*2*2*2*2*1));
  assign(528, second_person, int_add(528, value_of(528, second_person), 2*2*1));
  assign(528, second_person, int_add(528, value_of(528, second_person), 2*1));
  goto act_iv_scene_viii;
  
  act_iv_scene_vii:                       /* The second change */
  
  activate_character(534, hamlet);
  assign(532, second_person, int_sub(532, value_of(532, second_person), 2*2*2*1));
  assign(532, second_person, int_sub(532, value_of(532, second_person), 2*1));
  goto act_iv_scene_viii;
  
  act_iv_scene_viii:                      /* The end of the cycle */
  
  exit_scene_all(535);
  
  enter_scene(536, ophelia);
  enter_scene(536, olivia);
  
  activate_character(541, ophelia);
  assign(539, second_person, 1);
  assign(539, second_person, int_sub(539, value_of(539, second_person), 1));
  assign(539, second_person, int_add(539, value_of(539, first_person), value_of(539, second_person)));
  
  exit_scene(541, olivia);
  
  enter_scene(542, juliet);
  
  activate_character(546, juliet);
  assign(544, second_person, 1);
  assign(544, second_person, int_sub(544, value_of(544, second_person), 1));
  assign(544, second_person, int_add(544, value_of(544, first_person), value_of(544, second_person)));
  push(544, second_person, value_of(544, second_person));
  
  exit_scene(546, juliet);
  
  enter_scene(547, olivia);
  
  activate_character(551, olivia);
  assign(549, second_person, 1);
  assign(549, second_person, int_sub(549, value_of(549, second_person), 1));
  assign(549, second_person, int_add(549, value_of(549, first_person), value_of(549, second_person)));
  
  exit_scene(551, olivia);
  
  enter_scene(552, juliet);
  
  activate_character(557, ophelia);
  assign(555, second_person, (-1));
  assign(555, second_person, int_sub(555, (-1), value_of(555, second_person)));
  
  activate_character(560, juliet);
  assign(558, second_person, int_add(558, (-1), value_of(558, second_person)));
  comp1 = value_of(558, second_person);
  comp2 = value_of(558, first_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(563, ophelia);
  if (truth_flag) {
    goto act_iv_scene_ii;
  }
  
  exit_scene_all(563);
  
  act_v:                                  /* Settling the score */
  
  act_v_scene_i:                          /* The Beginning */
  
  enter_scene(568, juliet);
  enter_scene(568, ophelia);
  
  activate_character(572, ophelia);
  assign(570, second_person, 2*2*2*2*2*1);
  
  act_v_scene_ii:                         /* The cycle continues */
  
  exit_scene(574, juliet);
  
  enter_scene(575, romeo);
  
  activate_character(580, ophelia);
  pop(578, second_person);
  
  activate_character(583, romeo);
  pop(581, second_person);
  
  activate_character(586, ophelia);
  comp1 = value_of(584, first_person);
  comp2 = value_of(584, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(589, romeo);
  if (truth_flag) {
    goto act_v_scene_iii;
  }
  comp1 = value_of(587, first_person);
  comp2 = value_of(587, second_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(592, ophelia);
  if (truth_flag) {
    goto act_v_scene_iii;
  }
  
  exit_scene(592, romeo);
  
  enter_scene(593, juliet);
  
  activate_character(599, juliet);
  assign(596, second_person, 1);
  assign(597, second_person, int_sub(597, value_of(597, second_person), 1));
  
  activate_character(602, ophelia);
  assign(600, second_person, int_add(600, (-1), value_of(600, second_person)));
  comp1 = value_of(600, second_person);
  comp2 = value_of(600, first_person);
  truth_flag = (comp1 > comp2);
  
  activate_character(605, juliet);
  if (truth_flag) {
    goto act_v_scene_ii;
  }
  
  activate_character(608, ophelia);
  assign(606, second_person, 2*2*2*2*2*2*1);
  assign(606, second_person, int_add(606, value_of(606, second_person), 2*2*2*2*1));
  char_output(606, second_person);
  push(606, second_person, value_of(606, second_person));
  
  activate_character(611, juliet);
  push(609, second_person, value_of(609, first_person));
  pop(609, second_person);
  assign(609, second_person, int_add(609, value_of(609, second_person), 2*2*2*2*2*1));
  assign(609, second_person, int_add(609, value_of(609, second_person), 2*1));
  char_output(609, second_person);
  assign(609, second_person, int_sub(609, value_of(609, second_person), 2*2*2*1));
  assign(609, second_person, int_sub(609, value_of(609, second_person), 1));
  char_output(609, second_person);
  push(609, second_person, value_of(609, second_person));
  assign(609, second_person, int_add(609, value_of(609, second_person), 2*2*1));
  assign(609, second_person, int_add(609, value_of(609, second_person), 1));
  char_output(609, second_person);
  assign(609, second_person, int_sub(609, value_of(609, second_person), 2*2*2*2*1));
  assign(609, second_person, int_add(609, value_of(609, second_person), 2*2*1));
  assign(609, second_person, int_add(609, value_of(609, second_person), 1));
  char_output(609, second_person);
  pop(609, second_person);
  char_output(609, second_person);
  assign(609, second_person, int_add(609, value_of(609, second_person), 2*2*2*1));
  assign(609, second_person, int_sub(609, value_of(609, second_person), 1));
  char_output(609, second_person);
  assign(609, second_person, int_sub(609, value_of(609, second_person), 2*2*2*2*1));
  assign(609, second_person, int_add(609, value_of(609, second_person), 1));
  char_output(609, second_person);
  push(609, second_person, value_of(609, second_person));
  assign(609, second_person, int_div(609, value_of(609, second_person), 2*2*1));
  assign(609, second_person, int_add(609, value_of(609, second_person), 2*1));
  assign(609, second_person, int_add(609, value_of(609, second_person), 1));
  assign(609, second_person, int_mul(609, value_of(609, second_person), 2*2*1));
  char_output(609, second_person);
  
  activate_character(614, ophelia);
  assign(612, second_person, 2*2*2*2*2*1);
  char_output(612, second_person);
  pop(612, second_person);
  
  activate_character(617, juliet);
  push(615, second_person, value_of(615, second_person));
  push(615, second_person, value_of(615, first_person));
  pop(615, second_person);
  assign(615, second_person, int_add(615, value_of(615, second_person), 2*1));
  char_output(615, second_person);
  pop(615, second_person);
  assign(615, second_person, int_add(615, value_of(615, second_person), 2*1));
  assign(615, second_person, int_add(615, value_of(615, second_person), 1));
  char_output(615, second_person);
  pop(615, second_person);
  char_output(615, second_person);
  assign(615, second_person, int_add(615, value_of(615, second_person), 2*1));
  char_output(615, second_person);
  assign(615, second_person, int_add(615, value_of(615, second_person), 2*2*1));
  assign(615, second_person, int_add(615, value_of(615, second_person), 1));
  char_output(615, second_person);
  
  activate_character(620, ophelia);
  assign(618, second_person, 2*2*2*2*2*1);
  char_output(618, second_person);
  
  activate_character(623, juliet);
  assign(621, second_person, int_add(621, value_of(621, second_person), 2*2*2*2*1));
  assign(621, second_person, int_sub(621, value_of(621, second_person), 2*2*1));
  assign(621, second_person, int_add(621, value_of(621, second_person), 1));
  char_output(621, second_person);
  assign(621, second_person, int_sub(621, value_of(621, second_person), 2*1));
  push(621, second_person, value_of(621, second_person));
  char_output(621, second_person);
  assign(621, second_person, int_sub(621, value_of(621, second_person), 2*2*2*2*1));
  assign(621, second_person, int_add(621, value_of(621, second_person), 2*1));
  char_output(621, second_person);
  pop(621, second_person);
  char_output(621, second_person);
  push(621, second_person, value_of(621, second_person));
  
  activate_character(626, ophelia);
  char_output(624, second_person);
  
  activate_character(629, juliet);
  assign(627, second_person, int_sub(627, value_of(627, second_person), 2*2*2*2*2*1));
  char_output(627, second_person);
  push(627, second_person, value_of(627, second_person));
  assign(627, second_person, int_add(627, value_of(627, second_person), 2*1));
  char_output(627, second_person);
  assign(627, second_person, int_sub(627, value_of(627, second_person), 2*2*2*1));
  assign(627, second_person, int_add(627, value_of(627, second_person), 1));
  char_output(627, second_person);
  pop(627, second_person);
  char_output(627, second_person);
  assign(627, second_person, int_sub(627, value_of(627, second_person), 2*2*2*2*1));
  assign(627, second_person, int_add(627, value_of(627, second_person), 2*2*1));
  assign(627, second_person, int_add(627, value_of(627, second_person), 1));
  char_output(627, second_person);
  assign(627, second_person, int_add(627, value_of(627, second_person), 1));
  char_output(627, second_person);
  assign(627, second_person, int_add(627, value_of(627, second_person), 2*2*1));
  assign(627, second_person, int_add(627, value_of(627, second_person), 1));
  char_output(627, second_person);
  assign(627, second_person, int_sub(627, value_of(627, second_person), 2*2*2*1));
  assign(627, second_person, int_sub(627, value_of(627, second_person), 1));
  char_output(627, second_person);
  
  activate_character(632, ophelia);
  assign(630, second_person, 2*2*2*2*2*1);
  assign(630, second_person, int_add(630, value_of(630, second_person), 2*2*2*2*1));
  assign(630, second_person, int_add(630, value_of(630, second_person), 1));
  char_output(630, second_person);
  assign(630, second_person, int_add(630, value_of(630, second_person), 1));
  char_output(630, second_person);
  assign(630, second_person, int_add(630, value_of(630, second_person), 1));
  char_output(630, second_person);
  assign(630, second_person, 2*2*2*2*2*1);
  char_output(630, second_person);
  
  activate_character(635, juliet);
  assign(633, second_person, int_add(633, value_of(633, second_person), 2*2*2*2*2*1));
  assign(633, second_person, int_sub(633, value_of(633, second_person), 2*2*1));
  char_output(633, second_person);
  assign(633, second_person, int_add(633, value_of(633, second_person), 2*2*2*2*1));
  assign(633, second_person, int_add(633, value_of(633, second_person), 2*1));
  char_output(633, second_person);
  push(633, second_person, value_of(633, second_person));
  
  activate_character(638, ophelia);
  char_output(636, second_person);
  
  activate_character(641, juliet);
  assign(639, second_person, int_sub(639, value_of(639, second_person), 2*2*2*2*1));
  assign(639, second_person, int_add(639, value_of(639, second_person), 2*2*1));
  assign(639, second_person, int_add(639, value_of(639, second_person), 1));
  char_output(639, second_person);
  assign(639, second_person, int_add(639, value_of(639, second_person), 1));
  char_output(639, second_person);
  pop(639, second_person);
  push(639, second_person, value_of(639, second_person));
  char_output(639, second_person);
  
  activate_character(644, ophelia);
  char_output(642, second_person);
  
  activate_character(656, juliet);
  assign(645, second_person, int_sub(645, value_of(645, second_person), 2*1));
  assign(645, second_person, int_sub(645, value_of(645, second_person), 1));
  char_output(645, second_person);
  assign(646, second_person, int_sub(646, value_of(646, second_person), 2*2*2*2*1));
  assign(646, second_person, int_add(646, value_of(646, second_person), 1));
  char_output(646, second_person);
  pop(647, second_person);
  char_output(647, second_person);
  char_output(648, second_person);
  assign(649, second_person, int_add(649, value_of(649, second_person), 2*2*1));
  char_output(649, second_person);
  assign(650, second_person, int_sub(650, value_of(650, second_person), 2*2*2*1));
  char_output(650, second_person);
  assign(651, second_person, int_add(651, value_of(651, second_person), 2*2*1));
  char_output(652, second_person);
  assign(653, second_person, int_sub(653, value_of(653, second_person), 2*2*2*2*1));
  assign(653, second_person, int_add(653, value_of(653, second_person), 2*1));
  char_output(653, second_person);
  
  activate_character(659, ophelia);
  char_output(657, second_person);
  
  activate_character(662, juliet);
  assign(660, second_person, int_add(660, value_of(660, second_person), 1));
  push(660, second_person, value_of(660, second_person));
  char_output(660, second_person);
  assign(660, second_person, int_add(660, value_of(660, second_person), 2*2*2*2*1));
  assign(660, second_person, int_add(660, value_of(660, second_person), 1));
  char_output(660, second_person);
  pop(660, second_person);
  push(660, second_person, value_of(660, second_person));
  char_output(660, second_person);
  assign(660, second_person, int_add(660, value_of(660, second_person), 2*2*2*2*1));
  assign(660, second_person, int_sub(660, value_of(660, second_person), 2*1));
  assign(660, second_person, int_sub(660, value_of(660, second_person), 1));
  char_output(660, second_person);
  assign(660, second_person, int_add(660, value_of(660, second_person), 2*2*2*1));
  assign(660, second_person, int_sub(660, value_of(660, second_person), 1));
  char_output(660, second_person);
  assign(660, second_person, int_sub(660, value_of(660, second_person), 2*1));
  char_output(660, second_person);
  assign(660, second_person, int_sub(660, value_of(660, second_person), 2*2*2*2*1));
  assign(660, second_person, int_add(660, value_of(660, second_person), 1));
  char_output(660, second_person);
  pop(660, second_person);
  push(660, second_person, value_of(660, second_person));
  char_output(660, second_person);
  assign(660, second_person, int_add(660, value_of(660, second_person), 2*2*2*2*1));
  assign(660, second_person, int_sub(660, value_of(660, second_person), 2*1));
  assign(660, second_person, int_sub(660, value_of(660, second_person), 1));
  char_output(660, second_person);
  pop(660, second_person);
  char_output(660, second_person);
  
  activate_character(665, ophelia);
  assign(663, second_person, int_add(663, value_of(663, second_person), 1));
  char_output(663, second_person);
  
  activate_character(668, juliet);
  goto act_v_scene_iv;
  
  act_v_scene_iii:                        /* The roast of Juliet */
  
  exit_scene_all(669);
  
  enter_scene(670, ophelia);
  enter_scene(670, juliet);
  
  activate_character(675, juliet);
  assign(673, second_person, 2*2*2*2*2*2*1);
  assign(673, second_person, int_add(673, value_of(673, second_person), 2*2*2*2*1));
  assign(673, second_person, int_add(673, value_of(673, second_person), 2*2*1));
  assign(673, second_person, int_add(673, value_of(673, second_person), 2*1));
  assign(673, second_person, int_add(673, value_of(673, second_person), 1));
  push(673, second_person, value_of(673, second_person));
  char_output(673, second_person);
  
  activate_character(678, ophelia);
  push(676, second_person, value_of(676, first_person));
  pop(676, second_person);
  assign(676, second_person, int_add(676, value_of(676, second_person), 2*2*2*2*1));
  assign(676, second_person, int_add(676, value_of(676, second_person), 2*2*2*1));
  assign(676, second_person, int_add(676, value_of(676, second_person), 2*1));
  assign(676, second_person, int_add(676, value_of(676, second_person), 1));
  char_output(676, second_person);
  assign(676, second_person, int_sub(676, value_of(676, second_person), 2*1));
  assign(676, second_person, int_sub(676, value_of(676, second_person), 1));
  push(676, second_person, value_of(676, second_person));
  char_output(676, second_person);
  
  activate_character(681, juliet);
  pop(679, second_person);
  
  activate_character(684, ophelia);
  push(682, second_person, value_of(682, first_person));
  assign(682, second_person, int_sub(682, value_of(682, second_person), 1));
  char_output(682, second_person);
  assign(682, second_person, int_sub(682, value_of(682, second_person), 2*2*2*1));
  assign(682, second_person, int_add(682, value_of(682, second_person), 1));
  char_output(682, second_person);
  
  activate_character(687, juliet);
  assign(685, second_person, 2*2*2*2*2*1);
  assign(685, second_person, int_add(685, value_of(685, second_person), 1));
  push(685, second_person, value_of(685, second_person));
  char_output(685, second_person);
  assign(685, second_person, int_sub(685, value_of(685, second_person), 1));
  char_output(685, second_person);
  
  activate_character(690, ophelia);
  pop(688, second_person);
  assign(688, second_person, int_add(688, value_of(688, second_person), 2*1));
  char_output(688, second_person);
  pop(688, second_person);
  char_output(688, second_person);
  assign(688, second_person, int_add(688, value_of(688, second_person), 2*2*1));
  assign(688, second_person, int_add(688, value_of(688, second_person), 2*1));
  char_output(688, second_person);
  
  activate_character(693, juliet);
  char_output(691, second_person);
  
  activate_character(696, ophelia);
  push(694, second_person, value_of(694, second_person));
  assign(694, second_person, int_sub(694, value_of(694, second_person), 2*1));
  char_output(694, second_person);
  pop(694, second_person);
  char_output(694, second_person);
  assign(694, second_person, int_sub(694, value_of(694, second_person), 2*2*2*2*1));
  assign(694, second_person, int_sub(694, value_of(694, second_person), 2*1));
  char_output(694, second_person);
  assign(694, second_person, int_add(694, value_of(694, second_person), 2*2*2*1));
  char_output(694, second_person);
  
  activate_character(699, juliet);
  pop(697, second_person);
  char_output(697, second_person);
  char_output(697, second_person);
  
  activate_character(702, ophelia);
  push(700, second_person, value_of(700, first_person));
  pop(700, second_person);
  assign(700, second_person, int_add(700, value_of(700, second_person), 2*2*2*2*1));
  char_output(700, second_person);
  char_output(700, second_person);
  
  act_v_scene_iv:                         /* The end */
  
  activate_character(706, ophelia);
  assign(705, second_person, 2*2*2*1);
  assign(705, second_person, int_add(705, value_of(705, second_person), 2*1));
  char_output(705, second_person);
  
  return 0;
}
