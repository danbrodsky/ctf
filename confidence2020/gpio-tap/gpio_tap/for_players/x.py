from textwrap import wrap

inp = "0010010101001010010010101000010000000100110010010000100010010000000101100010000000100001010000000100110010101010101101010111000100101010111000100110010111000101001010111000101111010111000100111010111000100101010110000100000010111010100100010111000101111010110000100000010111010100000010110010100100010111000101001010111010100100010111000101100010110000100000010110010101010010110000100011010110000100000010110000100001010110000100001010000010100010010000010100010010000010100010010000010100010010000010100010010000010100010010000010100010010000010100010010000010100010010000010100010010000000100001010001100100000010111010100101010000100100001010110010100100010000100101100010101000101111010000100100101010101000100011010001100101000010111010100111010000100101110010111010101000010001100100001010111010100000010000100101000010111010101011010000100101101010101010101111010000100100010010111010100100010000100100000010111010100000010000100100011010110010100100010000100101001010101000101101010000100101011010101010101111010000100101111010111000100111010000100100100010101010100000010000100101010010111010100000010000100100110010111010101101010000100100111010111000100001010"

out = []

s_out = b""

order = [5,6,7,4,5,6,7,4]
order = [2,1,0,3,6,5,4,7]

data = open("./tap.gpio", "r").read().split('\n')

acc = 0
h = 0
decoded = ["x"] * 200
next_pos = 0
for b in data:
    if acc % 2 == 0:
        out.append(b)
        if b == "CHARACTER":
            h = 1
    else:
        curr = ["x"] * 8
        curr[2] = b[0]
        curr[1] = b[1]
        curr[0] = b[2]
        curr[3] = b[3]
        curr[6] = b[4]
        curr[5] = b[5]
        curr[4] = b[6]
        curr[7] = b[7]
        curr = ''.join(curr)
        n = int('0b'+curr, 2)
        if h:
            c = n.to_bytes((n.bit_length() + 7) // 8, 'big').decode("ascii")
            decoded[next_pos] = c
            next_pos += 1
            out.append(c)
            h = 0
        else:
            # value of command
            out.append(hex(n))
            if n >= 0x80:
                next_pos = n - 0x80

    acc += 1

print("\n".join(out))
print("\n".join(wrap("".join(decoded),16)))
